<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" >

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Barlow:300,400" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="/fav.png">

    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/css/fontawesome-all.min.css">
    <script src="/js/main.js"></script>

    <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>How to become witness - SophiaTX Developers</title>
<meta property="og:title" content="How to become witness" />
<meta name="description" content="Setup witness node Download wallet and node daemon Go to https://github.com/SophiaTX/SophiaTX/releases and download latest version. Prepare node Start node for the first time with following command:" />
<meta property="og:description" content="Setup witness node Download wallet and node daemon Go to https://github.com/SophiaTX/SophiaTX/releases and download latest version. Prepare node Start node for the first time with following command:" />
<link rel="canonical" href="https://developers.sophiatx.com/tutorials/Guide-to-become-witness" />
<meta property="og:url" content="https://developers.sophiatx.com/tutorials/Guide-to-become-witness" />
<meta property="og:site_name" content="SophiaTX Developers" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "WebPage",
"headline": "How to become witness",
"description": "Setup witness node Download wallet and node daemon Go to https://github.com/SophiaTX/SophiaTX/releases and download latest version. Prepare node Start node for the first time with following command:",
"url": "https://developers.sophiatx.com/tutorials/Guide-to-become-witness"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body>
<header>
    <h1>
        <button type="button" class="open-nav" id="open-nav"></button>
        <a href="/"  class="logo-link"><img src="/images/logo.svg" height="40" alt="SophiaTX Developers logo"></a>
    </h1>

    <form action="/search/" method="get">
        <input type="text" name="q" id="search-input" placeholder="Search">
        <input type="submit" value="Search" style="display: none;">
    </form>

    <div id="sidebar" class="sidebar">
	
	
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/">
		<h6 class="ctrl-nav-section title">Introduction</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/#introduction-welcome">Welcome to SophiaTX Developer Portal</a></li>
						
					
						
						<li><a href="/#introduction-sophiatx-blockchain">SophiaTX Blockchain</a></li>
						
					
						
						<li><a href="/#introduction-chain-basics">Chain Basics</a></li>
						
					
						
						<li><a href="/#introduction-transactions">Transactions</a></li>
						
					
						
						<li><a href="/#introduction-governance">Governance</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/quickstart/">
		<h6 class="ctrl-nav-section title">Quickstart</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/quickstart/#quickstart-setting-up-dev-enviroment">Dev enviroment instructions</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-technical-quickstart">Technical Quickstart</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-build-instructions">Build instructions</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-choose-sdk">Choose SDK</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-sophiatx-nodes">SophiaTX Nodes</a></li>
						
					
						
						<li><a href="/quickstart/#quickstart-testnet">SophiaTX testnet</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/tutorials/">
		<h6 class="ctrl-nav-section title">Tutorials</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/tutorials/#tutorials-guide-to-become-witness">How to become witness</a></li>
						
					
						
						<li><a href="/tutorials/#tutorials-guide-to-start-sync-node">How to start sync node</a></li>
						
					
						
						<li><a href="/tutorials/#tutorials-multiparty-encryption">Multiparty Encryption</a></li>
						
					
						
						<li><a href="/tutorials/#tutorials-subscription-api-quick-guide">Subscription API guide</a></li>
						
					
						
						<li><a href="/tutorials/#tutorials-using-sophiatx-to-send-hello-world-msg-via-api">Hello World via API calls</a></li>
						
					
						
						<li><a href="/tutorials/#tutorials-using-sophiatx-to-send-hello-world-msg">Hello World on SophiaTX</a></li>
						
					
						
						<li><a href="/tutorials/#tutorials-dynamic-global-properties">Understanding Dynamic Global Properties</a></li>
						
					
						
						<li><a href="/tutorials/#tutorials-guide-automatic-deploy">Node Deploy script</a></li>
						
					
						
						<li><a href="/tutorials/#tutorials-guide-custom-plugins">Custom plugins</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/sdks/">
		<h6 class="ctrl-nav-section title">SDK'S</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/sdks/#sdks-dotnet">C# SDK</a></li>
						
					
						
						<li><a href="/sdks/#sdks-javascript">Javascript SDK</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/apidefinitions/">
		<h6 class="ctrl-nav-section title">API'S</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/apidefinitions/#apidefinitions-introduction">Introduction</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-operations">Supported Operations</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-alexandria-api">Alexandria Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-database-api">Database Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-jsonrpc">Jsonrpc</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-network-broadcast-api">Network Broadcast Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-account-history-api">Account History Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-block-api">Block Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-chain-api">Chain Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-custom-api">Custom Api</a></li>
						
					
						
						<li><a href="/apidefinitions/#apidefinitions-subscribe-api">Subscribe Api</a></li>
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/demos/">
		<h6 class="ctrl-nav-section title">Demo's</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
					
				
			
		</ul>
	</section>
	
		
    <section class="pnl-main-nav-section main-nav-section" url="/cli_wallet/">
		<h6 class="ctrl-nav-section title">Cli Wallet</h6>
		<ul class="cont-nav-section content">
			
				
					
					
						
						<li><a href="/cli_wallet/#cli-wallet-introduction">Introduction</a></li>
						
					
						
						<li><a href="/cli_wallet/#cli-wallet-rpc-calls">RPC calls</a></li>
						
					
				
			
		</ul>
	</section>
	
</div>


    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
</header>
<div class="main" id="top">
    <div class="hero">
        <h1 class="hero__h1"></h1>
        <!--<img class="hero__img" src="/images/hero.png">-->
    </div>
    <h1 id="setup-witness-node">Setup witness node</h1>
<h3 id="download-wallet-and-node-daemon">Download wallet and node daemon</h3>
<p>Go to https://github.com/SophiaTX/SophiaTX/releases and download latest version.</p>
<h3 id="prepare-node">Prepare node</h3>
<p>Start node for the first time with following command:</p>

<p><code class="highlighter-rouge">./sophiatxd</code></p>

<p>Now go to kill the daemon and go to witness_node_data_dir/ and edit config.ini</p>

<p><code class="highlighter-rouge">cd witness_node_data_dir/</code></p>

<p>And modify this properties:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plugin = alexandria_api
plugin = network_broadcast_api

webserver-ws-endpoint = 0.0.0.0:9191
</code></pre></div></div>
<p>Now start <code class="highlighter-rouge">cli_wallet</code>, create new wallet file and key for witness</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./cli_wallet
new &gt;&gt;&gt; set_password YOUR_PASSWORD
locked &gt;&gt;&gt; unlock YOUR_PASSWORD
unlocked &gt;&gt;&gt; import_key YOUR_PRIVATE_KEY
unlocked &gt;&gt;&gt; suggest_brain_key
</code></pre></div></div>
<p>Output should look like something like this</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"brain_priv_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLENT EPOCHA GREED OCQUE BHALU TAPE SMUT AVERAH BALAO SHARPEN BUSTARD ATHIRST PACTION WIDBIN NYMPHA BANK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"wif_priv_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5J7ejuMu2ZkNWQ367X38wVvBWFzgbsjPvw6PLNtwsYEQrbhigT6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"pub_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SPH6m3vR9ZfRiGCSmpdY8G6kaAjXxGYBxu6pRE99cFL95SEcxEWeh"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Now kill the daemon and modify config.ini
Now you can reedit config.ini with following properties (you can remove rest of the plugins if you want to be just the witness)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>plugin = witness

witness = "YOUR_ACCOUNT_NAME"

private-key = 5J7ejuMu2ZkNWQ367X38wVvBWFzgbsjPvw6PLNtwsYEQrbhigT6 (just example)

enable-stale-production = false

required-participation = 35
</code></pre></div></div>
<p>And rerun the daemon with command
<code class="highlighter-rouge">./sophiatxd</code></p>

<p>Now you need to vest tokens to you account and update yourself as witness</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unlocked &gt;&gt;&gt; transfer_to_vesting YOUR_ACCOUNT_NAME YOUR_ACCOUNT_NAME "250000 SPHTX" true
unlocked &gt;&gt;&gt; update_witness YOUR_ACCOUNT_NAME "YOUR_URL" SPH6m3vR9ZfRiGCSmpdY8G6kaAjXxGYBxu6pRE99cFL95SEcxEWeh {"account_creation_fee":"0.05 SPHTX","maximum_block_size":50331648,"price_feeds":[]} true
</code></pre></div></div>

<h3 id="check-if-your-setup-is-right">Check if your setup is right</h3>
<p>Go to cli_wallet and execute command: <code class="highlighter-rouge">get_witness YOUR_WITNESS_NAME</code> and if you check the output, you should be able to you last confirmed block</p>

<h3 id="setup-price-feeding-service">Setup price feeding service</h3>
<p>Install the price feeder script: <code class="highlighter-rouge">npm install -g sophiatx-price-feeder</code>.</p>

<p>Once done, test it with:</p>

<p><code class="highlighter-rouge">feeder &lt;YOUR_ACCOUNT_NAME&gt; &lt;YOUR_MINING_KEY&gt;</code>, e.g. <code class="highlighter-rouge">feeder &lt;YOUR_ACCOUNT_NAME&gt; 5J7ejuMu2ZkNWQ367X38wVvBWFzgbsjPvw6PLNtwsYEQrbhigT6</code>. Use your actual mining key, as entered into config.ini.</p>

<p>Once the script functionality is checked, run it regularly, at lease once per day. You can use e.g. crond service on Linux:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>crontab
0 * * * * /usr/local/bin/feeder &lt;YOUR_ACCOUNT_NAME&gt; &lt;YOUR_MINING_KEY&gt;
&lt;ctrl-D&gt;
</code></pre></div></div>

<h2 id="setup-ntp-time-synchronization">Setup NTP Time Synchronization</h2>
<h3 id="suse">Suse</h3>
<p><a href="https://www.suse.com/documentation/sles11/book_sle_admin/data/sec_netz_xntp_netconf.html">Suse guide</a></p>
<h3 id="ubuntu">Ubuntu</h3>
<p>Before installing ntpd, you should turn off timesyncd:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo timedatectl set-ntp no
</code></pre></div></div>
<p>Please install ntpd by executing following command:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install ntp
</code></pre></div></div>
<p>ntpd will be started automatically after install. You can verify that everything is working by following command:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo ntpq -p
</code></pre></div></div>
<p>Example:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     remote           refid      st t when poll reach   delay   offset  jitter
==============================================================================
 0.ubuntu.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 1.ubuntu.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 2.ubuntu.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 3.ubuntu.pool.n .POOL.          16 p    -   64    0    0.000    0.000   0.000
 ntp.ubuntu.com  .POOL.          16 p    -   64    0    0.000    0.000   0.000
 ec2-52-17-231-7 193.120.142.71   2 u    -   64    1    0.483   -1.022   0.025
 ec2-52-209-118- 89.101.218.6     2 u    1   64    1    0.679   -1.663   0.267
 tshirt.heanet.i .PPS.            1 u    -   64    1    3.800   -0.999   0.017
 meg.magnet.ie   195.66.241.2     2 u    -   64    1    1.549   -0.667   0.276
 ec2-34-242-217- 89.101.218.6     2 u    -   64    1    0.817    1.451   0.092
 t1.time.ir2.yah 212.82.106.33    2 u    1   64    1    1.666   -0.939   0.005
 mirror.datacent 192.36.144.22    2 u    1   64    1   48.287   -0.197   0.036
 pugot.canonical 17.253.34.125    2 u    -   64    1   11.398   -1.159   0.000
 chilipepper.can 145.238.203.14   2 u    1   64    1   10.779   -1.549   0.000

</code></pre></div></div>


</div>
<div class="footer">
    <a href="#">↑ Back to top</a>
</div>
<script>
    document.getElementById("open-nav").addEventListener("click", function () {
        document.body.classList.toggle("nav-open");
    });
</script>
</body>
</html>

<script src="/js/adjust.js"></script>
